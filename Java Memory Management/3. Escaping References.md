Consider this code:

```
public class CustomerRecords {
	private Map<String, Customer> records;
	
	public CustomerRecords() {
		this.records = new HashMap<>();
	}
	
	public void addCustomer(Customer c){
		this.records.put(c.getName(), c);
	}
	
	public Map<String, Customer> getCustomers() {
		return this.records;
	}
}
```

We have the method 	`getCustomers` which gives the reference to the map of records. Now someone can write a nasty code from the calling code:

```
CustomerRecords records = new CustomerRecords();
Map<String, Customer> customers = records.getCustomers();
customers.clear();
```
The reference to the `Map` has escaped from the class in which it should have been encapsulated. It is almost as if we have declared this `Map` as a public variable.

How do we address this issue?<br>
References can only be escaped if have we have methods which are returning a pointer to the object. In our example, `getCustomers` method is returning a pointer to the records object. So, we are looking for ways to avoid returning pointers to the existing objects.

First approach could be to just implement `Iterable` interface:

```
public class CustomerRecords implements Iterable<Customer> {
	private Map<String, Customer> records;
	
	public CustomerRecords() {
		this.records = new HashMap<>();
	}
	
	public void addCustomer(Customer c){
		this.records.put(c.getName(), c);
	}
	
	public Iterator<Customer> iterator(){
		return records.values().iterate();
	}
	/*public Map<String, Customer> getCustomers() {
		return this.records;
	}*/
}
```
Having done this, in the calling code, we could simply do this:
```
for(Customer c : records){
	System.out.println(c.getName());
}
```

But there is a problem with this approach- `Iterator` has a method `remove`. So I could do this:

```
records.iterator().remove()
```
This still allows me to mutate the collection. So, a better solution could be to return a new instance of the collection:
```
public Map<String, Customer> getCustomers() {
		return new HashMap<String, Customer>(this.records);
}
```
So, now we are returning a copy of the map.